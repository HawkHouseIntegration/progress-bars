/*! pg.progress-bars v0.2.2 | Pavel Grinchenko <psdcoder@gmail.com> | (c) 2018 */
angular.module("pg.progress-bars",[]),function(){"use strict";function t(t,n,s){var e=t.getClasses(),i={container:e.container||"progress__container",bar:e.bar||"progress__bar",barShowing:e.barShowing||"progress__container_showing"};return{restrict:"EA",template:'<div class="'+i.container+'"><div class="'+i.bar+'"></div></div>',scope:{name:"@",minimum:"@",speed:"@",trickleRate:"@",trickleSpeed:"@",animation:"@"},link:function(t,e){if(!t.name)throw new Error('You must specify "name" property for progress bar');e.attr("id","progress-bar-"+t.name);var r=s(t.name,{container:e,bar:e.find("div")},{minimum:+t.minimum,speed:+t.speed,animation:t.animation,trickleRate:+t.trickleRate,trickleSpeed:+t.trickleSpeed,showingClass:i.barShowing});n._register(r),t.$on("$destroy",function(){n._unregister(r)})}}}t.$inject=["ProgressBarsSettings","ProgressBarsStorage","ProgressBarFactory"],angular.module("pg.progress-bars").directive("pgProgressBar",t)}(),function(){"use strict";function n(t,e,r){if(!t)throw new Error("You must specify name for ProgressBar");if(!e||!e.container||!e.bar)throw new Error('You must specify elements object with "container" and "bar" dom nodes');r=r||{},this.name=t,this.elements=e,this.options={minimum:r.minimum||8,speed:r.speed||250,animation:r.animation||"ease-out",trickleRate:r.trickleRate||2,trickleSpeed:r.trickleSpeed||300,showingClass:r.showingClass},this.current=null,this.toStop=!0}angular.module("pg.progress-bars").factory("ProgressBarFactory",function(){return function(t,e,r){return new n(t,e,r)}}),n.prototype._show=function(){this.elements.container.addClass(this.options.showingClass),this.elements.bar.css("opacity",1)},n.prototype._hide=function(){this.elements.container.removeClass(this.options.showingClass),this.elements.bar.css("opacity",0),this.elements.bar.css("width",0)},n.prototype._clamp=function(t,e,r){return t<e&&(t=e),r<t&&(t=r),t},n.prototype._trickle=function(){var t=Math.sqrt(100-this.current)/5*this.options.trickleRate;return this.inc(Math.random()*t)},n.prototype._positioning=function(t,e,r){return{width:t+"%",transition:"all "+e+"ms "+r}},n.prototype.set=function(r){var n=this;return this._show(),r=this._clamp(r,this.options.minimum,100),this.current=100===r?null:r,setTimeout(function(){var t=n._positioning(r,n.options.speed,n.options.animation);for(var e in t)t.hasOwnProperty(e)&&n.elements.bar.css(e,t[e])},0),100===r&&setTimeout(function(){n.elements.bar.css("transition","all "+n.options.speed+"ms linear"),n.elements.bar.css("opacity",0),setTimeout(function(){n._hide()},n.options.speed)},n.options.speed),this},n.prototype.get=function(){return this.current},n.prototype.start=function(){var t=this;this.toStop=!1,t.current||t.set(0);var e=function(){setTimeout(function(){t.current&&!t.toStop&&(t._trickle(),e())},t.options.trickleSpeed)};return e(),this},n.prototype.isInProgress=function(){return!this.toStop},n.prototype.stop=function(){return this.toStop=!0,this},n.prototype.inc=function(t){return this.current?("number"!=typeof t&&(t=this._clamp(Math.random()*(100-this.current)/3,10,95)),this.current=this._clamp(this.current+t,0,99.4),this.set(this.current),this):this.start()},n.prototype.done=function(){return this.current&&this.inc(30+50*Math.random()).set(100),this}}(),function(){"use strict";angular.module("pg.progress-bars").provider("ProgressBarsSettings",function(){var e={};return{setContainerClass:function(t){return e.container=t,this},setBarClass:function(t){return e.bar=t,this},setShowingClass:function(t){return e.barShowing=t,this},$get:function(){return{getClasses:function(){return e}}}}})}(),function(){"use strict";function r(){var e=!1,r=void 0;this.dummy=!0,this.start=function(){e=!0,r&&r.start()},this.done=function(){e=!1,r&&r.done()},this.apply=function(t){e&&t.start(),r=t}}angular.module("pg.progress-bars").service("ProgressBarsStorage",function(){var e={};this._register=function(t){e[t.name]&&e[t.name].dummy&&e[t.name].apply(t),e[t.name]=t},this._unregister=function(t){e[t.name]&&delete e[t.name]},this.get=function(t){return e[t]||(e[t]=new r),e[t]}})}();